# 斯坦福课程「CS146S现代软件开发者」W1DX：提示词的物理极限——从 CoT 到工具调用

> **特别篇说明**：这将是 Week 1 的最后一课。我们不会教新的 Prompt 技巧，而是要带你亲眼目睹 Prompt Engineering 的**物理尽头**，从而为你打开通往 Week 2 (Agentic AI) 的大门。

---

## 1. 绝望的“大逃杀”：当技巧耗尽时

在 W1D7 中，我们学会了用 **K-shot** 规范格式；在 W1D8 中，我们将学会用 **CoT** 引导逻辑。
但是，是否存在一种任务，无论你怎么 K-shot，无论你怎么 CoT，小模型（3B 参数级）都绝对做不出来？

答案是肯定的。

### 1.1 实验代号：`cot_benchmark.py`
我们这周设计了一个名为 **“字符串倒序 (String Reversal)”** 的任务。
看起来很简单：把 `httpstatus` 变成 `sutatsptth`。

为了让 3B 小模型做对这道题，我们尝试了人类能想到的 **10 种最强思维链策略**：

1.  **基础步骤法**：一步步拆解。
2.  **连字符法**：`h-t-t-p...` 试图对抗 Tokenizer。
3.  **垂直列表法**：一行一个字母。
4.  **索引表格法**：画表对应。
5.  **栈模拟法**：模拟数据结构。
6.  **Python 解释器法**：假装自己是 Python。
7.  **分块法**：切成两半再拼。
8.  **JSON 数组法**：`["h", "t", ...]`。
9.  **双重检查法**：写完再倒回去检查。
10. **拼写教学法**：像老师拼写单词一样。

### 1.2 实验结果：全军覆没
你可以运行本课配套的 `cot_benchmark.py`。结果是震撼的：**10 比 0**。

```text
❌ Strategy 1: 基础步骤 -> stutsatpth (漏字)
❌ Strategy 2: 连字符法 -> sutatstpttth (多字)
❌ Strategy 3: 垂直列表法 -> stusattpth (乱序)
...
❌ Strategy 9: 双重检查 -> sustasptth (仅仅错了2个字母，最接近的一次)
```

---

## 2. 为什么会这样？——大模型的“物理定律”

这个实验揭示了 Prompt Engineering 无法突破的两个物理天花板：

### 2.1 散光眼 (Tokenizer Blindness)
小模型看到的 `httpstatus` 是一个被打包好的 Token ID。即使我们用“连字符法”强行拆开，它的“视力”依然模糊。这就像让近视眼去数地上的蚂蚁。

### 2.2 注意力漂移 (Attention Drift)
在 CoT 的过程中，模型需要一边“输出”一边“记忆”上一步的结果。
对于 3B 模型，它的 **Attention Head (注意力头)** 就像一个容量很小的内存条。当序列变长（比如倒数到第 6 个字母时），它的注意力就开始涣散，忘了第 7 个字母是什么，于是开始 **Hallucination (幻觉)**——瞎编一个 `x` 或 `o` 填上去。

**结论**：你可以通过 Prompt 教它“方法论”（CoT），但你无法通过 Prompt 增加它的“智商”（参数量/算力）。

---

## 3. 唯一的出路：从“大脑”到“工具”

如果在工程实践中，我们必须用 3B 模型完成这个任务（比如为了隐私或低成本），该怎么办？

死磕 Prompt 是死路一条。我们必须**换个赛道**。

### 3.1 人类是怎么做到的？
如果让你算出 `32948 * 49231`，你会心算吗？
不会。你会掏出**计算器**。

### 3.2 AI 的“计算器”
如果 AI 算力不够，为什么不让它**写一行代码**，交给 Python 去跑呢？

*   **Prompt 做法 (失败)**：`请倒序 httpstatus...` -> `Answer: st...`
*   **Tool Use 做法 (成功)**：
    1.  AI 思考：`我算不过来，但我会写 Python。`
    2.  AI 生成代码：`print("httpstatus"[::-1])`
    3.  Python 执行：返回 `sutatsptth`
    4.  AI 输出：`Answer: sutatsptth`

这，就是我们在 **Week 2** 要讲的核心主题——**Agentic AI (代理智能)**。

---

## 4. 下周预告：Agent 的诞生

在 Week 1，我们学习了如何像“驯兽师”一样，通过自然语言（Prompt）去指挥 AI。
在 Week 2，我们将给 AI 加上“手”和“脚”，让它不再只是一个只会说话的**聊天机器人 (Chatbot)**，而是一个能调用工具、能联网、能执行代码的**智能体 (Agent)**。

请保留好你的 `cot_benchmark.py`，那是我们旧时代的墓志铭，也是新时代的入场券。
